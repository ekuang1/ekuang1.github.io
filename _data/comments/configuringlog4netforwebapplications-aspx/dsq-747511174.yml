id: dsq-747511174
date: 2008-05-01T02:10:44.0000000-07:00
name: m
avatar: https://disqus.com/api/users/avatars/m.jpg
message: <p>I've been trying to get log4net to work with <a href="http://asp.net" rel="nofollow noopener" title="asp.net">asp.net</a> 2.0 and a database table. Here is the config file:<br>  &lt;configSections&gt;<br>    &lt;section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" /&gt;<br>  &lt;/configSections&gt;<br>  &lt;log4net&gt;<br>    &lt;appender name="ADONetAppender" type="log4net.Appender.ADONetAppender"&gt;<br>      &lt;bufferSize value="100" /&gt;<br>      &lt;connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" /&gt;<br>      &lt;!--&lt;add key="Default" value="Database=CJISMNIDb;Server=CJISDEVSQL01;Integrated Security=SSPI;"/&gt;--&gt;<br>      &lt;connectionString value="server=CJISDEVSQL01;database=EventLog;integrated security=true;" /&gt;<br>      &lt;commandText value="exec LD80Event_CREATE @eventDate, @logLevel, @message, @exception, @updateUserName" /&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@eventDate" /&gt;<br>        &lt;dbType value="DateTime" /&gt;<br>        &lt;layout type="log4net.Layout.RawTimeStampLayout" /&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@logLevel" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="512" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout"&gt;<br>          &lt;conversionPattern value="%p" /&gt;<br>        &lt;/layout&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@message" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="4000" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout"&gt;<br>          &lt;conversionPattern value="%m" /&gt;<br>        &lt;/layout&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@exception" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="4000" /&gt;<br>        &lt;layout type="log4net.Layout.ExceptionLayout" /&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@updateUserName" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="50" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout"&gt;<br>          &lt;conversionPattern value="%p" /&gt;<br>        &lt;/layout&gt;<br>      &lt;/parameter&gt;<br>    &lt;/appender&gt;<br>    &lt;logger name="eventLog"&gt;<br>      &lt;level value="ALL" /&gt;<br>      &lt;appender-ref ref="ADONetAppender" /&gt;<br>    &lt;/logger&gt;<br>    &lt;root&gt;<br>      &lt;level value="ALL" /&gt;<br>      &lt;appender-ref ref="ADONetAppender" /&gt;<br>    &lt;/root&gt;<br>  &lt;/log4net&gt;<br>This is the line of code in Global.asax, Application_Start method:<br>log4net.Config.XmlConfigurator.Configure();<br>This is in the default page:<br>private static readonly ILog eventLog = LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);<br>The issue is all the properties are 'always' set to false when the application is running and nothing is ever written to the database. I have been searching the web for 2 whole days now and I can not find any information that has made a difference.<br>Can you help with this problem?<br>Thank you.</p>
