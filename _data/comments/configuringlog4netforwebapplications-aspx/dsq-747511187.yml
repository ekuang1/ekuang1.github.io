id: dsq-747511187
date: 2010-08-24T01:35:22.0000000-07:00
name: John Halliday
avatar: https://disqus.com/api/users/avatars/John Halliday.jpg
message: <p>I have configured a simple VS2008 webapp to use the log4net ADONetAppender and get no errors.  Yet, I also get no records inserted into the database.  I have ensure that the bufferSize is either 0 or 1 (tried both ways) and also ensured that the IsDebugEnabled and IsErrorEnabled are enabled (both are true at <br>runtime).  Why can't I get records into the DB?<br>I have placed the following static variable at the top of my page class:<br>    private static readonly ILog logger = LogManager.GetLogger(typeof(Logger));<br>and I use the following simple function:<br>    protected void Button1_Click(object sender, EventArgs e)<br>    {<br>        //log4net.Config.DOMConfigurator.Configure();<br>        log4net.Config.XmlConfigurator.Configure();<br>        logger.Debug("Debug");<br>        logger.Debug("The expected logic failed validation");<br>    }<br>My web.config code:<br>    &lt;section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/&gt;<br>  &lt;/configSections&gt;<br>  &lt;log4net debug="true"&gt;<br>    &lt;root&gt;<br>      &lt;level value="DEBUG" /&gt;<br>        &lt;appender-ref ref="ADONetAppender" /&gt;<br>    &lt;/root&gt;<br>    &lt;appender name="ADONetAppender" type="log4net.Appender.ADONetAppender"&gt;<br>      &lt;bufferSize value="0" /&gt; <br>      &lt;connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089, requirePermission=false" /&gt; <br>      &lt;connectionString value="server=OURSERVERNAME; uid=DVUSER; pwd=123abc; database=DevCadence" /&gt; <br>      &lt;commandText value="INSERT INTO JohnsLog ([Date],[Thread],[Level],[Logger],[Message],[Exception]) VALUES (@log_date, @thread, @log_level, @logger, @message, @exception)" /&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@log_date" /&gt;<br>        &lt;dbType value="DateTime" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" /&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@thread" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="255" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout" value="%thread" /&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@log_level" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="50" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout" value="%level" /&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@logger" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="255" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout" value="%logger" /&gt;<br>      &lt;/parameter&gt;<br>      &lt;parameter&gt;<br>        &lt;parameterName value="@message" /&gt;<br>        &lt;dbType value="String" /&gt;<br>        &lt;size value="4000" /&gt;<br>        &lt;layout type="log4net.Layout.PatternLayout" value="%message" /&gt;<br>      &lt;/parameter&gt;<br>    &lt;/appender&gt;<br>  &lt;/log4net&gt;<br>Thanks for any and all help.</p>
