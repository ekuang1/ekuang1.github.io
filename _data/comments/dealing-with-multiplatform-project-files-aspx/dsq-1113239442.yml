id: dsq-1113239442
date: 2013-11-07T15:58:01.0000000-08:00
name: Stuart Hillary
avatar: https://disqus.com/api/users/avatars/stuart_hillary.jpg
message: <p>An approach I use is to place all your common project properties and code files in a separate msbuild project that is imported by each project.</p><p>For example, you could have an msbuild project called Common.props in the same directory as your other project files that contained something like:</p><p>&lt;project defaulttargets="Build" xmlns="<a href="http://schemas.microsoft.com/developer/msbuild/2003" rel="nofollow noopener" title="http://schemas.microsoft.com/developer/msbuild/2003">http://schemas.microsoft.co...</a>"&gt;<br>&lt;propertygroup&gt;<br>    &lt;rootnamespace&gt;Octokit&lt;/rootnamespace&gt;<br>    &lt;assemblyname&gt;Octokit&lt;/assemblyname&gt;    &lt;defineconstants&gt;TRACE;CODE_ANALYSIS;SIMPLE_JSON_OBJARRAYINTERNAL;SIMPLE_JSON_INTERNAL;NET_45&lt;/defineconstants\&gt;<br>...<br>  &lt;/propertygroup&gt;<br>&lt;itemgroup&gt;<br>    &lt;externalcompile include="..\SolutionInfo.cs"&gt;<br>        &lt;link&gt;Properties\SolutionInfo.cs&lt;/link&gt;<br>    &lt;/externalcompile&gt;<br>    &lt;externalcompile include="Clients\ActivitiesClient.cs"/&gt;<br>    &lt;externalcompile include="Clients\AssigneesClient.cs"/&gt;<br>    &lt;externalcompile include="Clients\CommitStatusClient.cs"/&gt;<br>    ...<br>&lt;/itemgroup&gt;<br>&lt;choose&gt;<br>    &lt;when condition=" '$(Configuration)' == 'Debug' "&gt;<br>        &lt;propertygroup&gt;<br>            &lt;defineconstants&gt;$(DefineConstants);DEBUG&lt;/defineconstants&gt;<br>            ...<br>        &lt;/propertygroup&gt;<br>    &lt;/when&gt;<br>&lt;/choose&gt;</p><p>Instead of having entries in this script for each .cs file you could make a list using a wildcard instead.</p><p>To use this msbuild file in your projects use an import at the start of each csproj</p><p>&lt;import project=".\Common.props"/&gt;</p><p>and an item group further down in the file</p><p>&lt;itemgroup&gt;<br>    &lt;compile include="@(ExternalCompile)"/&gt;<br>  &lt;/itemgroup&gt;</p><p>Any other properties and items that are common to each project could be moved to this Common.props file.</p><p>The downside to this approach is that if you add a new file in Visual Studio the reference is placed inside the csproj file rather than the Common.props file (if you are running the FAKE task it should still pick up the problem though, you just have to move the reference into just one msbuild script rather than several csproj files).</p><p>EDIT. The xml seems to be a bit screwed above.</p>
