id: dsq-747527682
date: 2009-01-08T13:13:37.0000000-08:00
name: Christiaan VdP
avatar: https://disqus.com/api/users/avatars/Christiaan VdP.jpg
message: "<p>I've tried the same excercise some time ago and I came to the following solution:<br>define the following routes:<br>routes.MapRoute(\"first\"<br>, \"{controller}/{action}/{id}.{type}\"<br>, new {controller = \"Home\", action = \"Index\", id = \"\", type = \"html\"});<br>routes.MapRoute(\"second\"<br>, \"{controller}/{action}/{id}\"<br>, new { controller = \"Home\", action = \"Index\", id = \"\", type = \"html\" });<br>And now I've created a Custom IViewEngine which is actually a factory around the real viewengine.  It's this wrapper that will decide which ViewEngineResult it will return, depending on the 'type' value in the RouteData<br>class WrapperViewEngine : IViewEngine<br>{<br>private IViewEngine webformEngine = new WebFormViewEngine();<br>#region IViewEngine Members<br>public ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName)<br>{<br>   if (controllerContext.RouteData.Values[\"type\"].ToString().ToLower() == \"html\")<br>       return defaultEngine.FindView(controllerContext, viewName, masterName);<br>   else<br>       return new XmlViewEngineResult(new XmlView(controllerContext.Controller.ViewData), this);<br>   }<br>   #endregion<br>   &lt;snip&gt;<br>}<br>and this is the XmlView<br> public class XmlView : IView<br>    {<br>        public XmlView(ViewDataDictionary aDataDictionary)<br>        {<br>        }<br>        public void Render(ViewContext viewContext, TextWriter writer)<br>        {<br>            if( viewContext.ViewData.Model != null)<br>            {<br>                XmlSerializer serializer = new XmlSerializer(viewContext.ViewData.Model.GetType());<br>                serializer.Serialize(writer, viewContext.ViewData.Model);<br>            }<br>        }<br>    }<br>now you can handle the following routes:<br>/controller/action(/id)  =&gt; type = html<br>/controller/action/id.html =&gt; type = html<br>/controller/action/id.xml =&gt; type = xml<br></p>"
