id: dsq-747510182
date: 2006-07-06T15:09:00.0000000-07:00
name: Freddy
avatar: https://disqus.com/api/users/avatars/Freddy.jpg
message: <p><br>Here is a regex that will accept form input, as long as it doesn't contain any HTML or JSP comment tags:<br>^(?:(?!(!|%)--[\s\S]*?--[ %\t\n\r]*&gt;).)*$<br>It works on the client-side (JavaScript RegEx engine) but fails on the server side with an "Invalid RegEx" error. <br>Does anyone know how to write the expression so that it will validate against the XML specification for RegEx?<br>Thanks,<br>---Freddy<br>More details follow:<br>I need a regex that will reject form data that contains HTML or JSP comments.<br>I am contstrained to entering the pattern into a proprietery xml editor.<br>I don't have the option of using substitution or NOT operators - only the expression itself.<br>Page 198 in the Perl Cookbook provides the basic format for a NOT regex:<br>^(?:(?!PATTERN_NOT_TO_MATCH).)*$<br>And the RegExLib provided the HTML comment pattern that I want to dis-allow:<br>&lt;!--[\s\S]*?--[ \t\n\r]*&gt;<br>My Sax parser wont allow a less-than character in the expression, so I will leave it out.<br>I also want to dis-allow JSP comments, so I added a % as an alternate to the ! at the beginning and as a member of the character set at the end.<br>^(?:(?!(!|%)--[\s\S]*?--[ %\t\n\r]*&gt;).)*$<br>It works fine on the client-side, but fails on the server-side.<br>How do I write an equivelant regex that will validate against the XML spec?<br></p>
