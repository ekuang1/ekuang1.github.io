id: dsq-747533149
date: 2010-10-29T23:31:26.0000000-07:00
name: Igorbek
avatar: https://disqus.com/api/users/avatars/Igorbek.jpg
message: "<p>I found 2 bugs in Razor view-engine.<br>1. I can't write any inline-templates in _ViewStart, cause<br>WriteLitralTo is not defined in ViewStartPage class<br>2. Translator inserts unnecessary whitespace writes<br>For ex:<br>_ViewStart.cshtml<br>@{<br>Func&lt;int, HelperResult&gt; intFormatter = @&lt;text&gt;- @item -&lt;/text&gt;;<br>}<br>That code translates to:<br>public class _ViewStart_cshtml : System.Web.Mvc.ViewStartPage {<br>...<br>public override void Execute() {<br>Func&lt;int, HelperResult&gt; intFormatter =item =&gt; new<br>System.Web.WebPages.HelperResult(__razor_template_writer =&gt; {<br> WriteLiteralTo(@__razor_template_writer, \" \");<br> WriteLiteralTo(@__razor_template_writer, \"- \");<br>                WriteTo(@__razor_template_writer, item);<br> WriteLiteralTo(@__razor_template_writer, \" -\");<br>         }<br>     }<br> }<br>So:<br>(1)<br>CS0103: The name 'WriteLiteralTo' does not exist in the current context<br>WriteLiteralTo is defined in System.Web.WebPages.WebPageBase, but<br>StartPage does not inherited from it.<br>(2)<br>Why these unnecessary WriteLiteralTo calls (\" \")? - there is no in my<br>code. And these unnecessery calls occurs all the time even in other<br>views! Why? I don't need them!<br>If I change the code, by replacing single space by other spaces (for<br>ex, three tabs) between = and @:<br>Func&lt;int, HelperResult&gt; intFormatter =                  @&lt;text&gt;- @item -&lt;/text&gt;;<br>translator generates:<br>WriteLiteralTo(@__razor_template_writer, \"\\t\\t\\t\");<br>WriteLiteralTo(@__razor_template_writer, \"- \");<br>...<br>so, it generates writes for whitespaces BEFORE @, from code context!<br>why? Is this bug?<br>Is this behaivor will be changed to release?<br>How to decide these problems?</p>"
