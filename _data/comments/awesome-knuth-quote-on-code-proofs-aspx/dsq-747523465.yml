id: dsq-747523465
date: 2007-11-29T15:55:35.0000000-08:00
name: Frans Bouma
avatar: https://disqus.com/api/users/avatars/Frans Bouma.jpg
message: "<p>Let's counter this with Micah's logic. <br>Say I have a Linq provider, which should be able to parse an unlimited number of different expression trees to SQL. <br>How do you know when that code is ready to be shipped to customers?<br>That's a fair question I think, and given the massive scope of the code, it's not really a simple one either I think.<br>I agree what Micah said about provability in science, but that's nothing new, as what he said is simply the cornerstone science is build on: something is true if there's not a prove possible which proves it's not true. So all you need is a simple unittest to prove code is broken, completely agreed with that. <br>The flipside of that is that when they all turn up green, you haven't answered your question about \"Am I done? Is this shippable?\". <br>I now work for 2.5 months on our Linq provider and if there's one thing where unittests are pretty meaningless other than to see if there is at least ONE situation where the code works, it's with code like a Linq provider. <br>Take this query:<br>var q = from c in nw.Customers<br>where c.Orders.Count(o=&gt;o.Employee.Country==\"USA\") &gt; 10<br>select c;<br>compare it with:<br>var q = from c in nw.Customers<br>where c.Orders.Where(o=&gt;o.Employee.Country==USA\").Count() &gt; 10<br>select c;<br>They result in the same resultset. Yet, the expression trees are completely different w.r.t. 'Count'. <br>Add to the mix a query where Count is used in group by statements where Count() has to be swapped in place in the tree, and you're in for a lot of fun :). I.o.w.: the number of different trees to expect with Count and how to threat Count is already big, left alone the set of tests to cover them all. So that's not going to work. <br>Honestly: answer for me the question I asked in the first sentences of my post. Saying on a weblog that unittests are great etc. is OK, nothing against tests, but with real-life problems like the one I described above, does what you say really solve that real-life problem?<br>Oh, before you ask, no I don't have a gut-feeling-o-meter which tells me 'this should be OK'.</p>"
