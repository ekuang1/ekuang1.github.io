id: dsq-747527973
date: 2009-02-03T21:13:49.0000000-08:00
name: John Meyer
avatar: https://disqus.com/api/users/avatars/John Meyer.jpg
message: <p>I wrote the following to get around not being able to call the MVC functions because they're internal, but I have a question...<br><code><br>public static String GetUrlForLink(this HtmlHelper htmlHelper, String routeName, String actionName, String controllerName, String protocol, String hostName, String fragment, RouteValueDictionary routeValues)<br>{<br>  var urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext, htmlHelper.RouteCollection);<br>  String url = null;<br>  if (routeName != null) {<br>    url = urlHelper.RouteUrl(routeName, routeValues, protocol, hostName);<br>  } else {<br>    url = urlHelper.Action(actionName, controllerName, routeValues, protocol, hostName);<br>  }<br>  if (!String.IsNullOrEmpty(fragment)) {<br>    url = String.Concat(url, "#", fragment);<br>  }<br>  return url;<br>}<br></code><br>in the call to urlHelper.Action, it's possible that controller could be null (I basically duplicated the signatures from LinkExtensions.cs, changing the bodies to make image links)... do I need a null coalescing (??) operator on the controller parameter to get the expected functionality, and if so what should it be? (htmlHelper.ViewContext.RouteData.Values["controller"] as String)?<br>Thanks!</p>
