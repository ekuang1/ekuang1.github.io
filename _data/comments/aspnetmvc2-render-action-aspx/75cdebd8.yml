id: 75cdebd8
date: 2019-10-31T04:53:08.2151505Z
name: Peter
avatar: https://secure.gravatar.com/avatar/17d65346621462fd24d2822cef91c226?s=80&d=identicon&r=pg
message: "Hi.\r\nWhat if we have a controller field, that extracts something from the database when Controller is creating:\r\npublic class MyController {\r\n  private readonly List<Model> _models = Context.GetModels(); // here we get all our Models\r\n  public ActionResult Index() {\r\n    return View();\r\n  }\r\n  \r\n  [ChildActionOnly]\r\n  public ActionResult Menu() {\r\n     // here we do something with _models\r\n      return PartialView(models);\r\n  }\r\n  [ChildActionOnly]\r\n  public ActionResult Menu2() {\r\n     // and here we do something else with _models also\r\n      return PartialView(models);\r\n  }\r\n}\r\nThe goal is call a DB only once, instead of do it in every controller's method.\r\nNow here is a problem. This code will call GetModels() 3 times!\r\n1. When Controller is creating\r\n2. When we are calling Menu within Index via @Html.Action(\"Menu\")\r\n3. When we are calling Menu2 within Index via @Html.Action(\"Menu2\")\r\n\r\nEVEN if we won't be use _models in our child methods, it triggers 3 times anyway. \r\nThe question is how can we achieve the goal - the only one call to database\r\nand is it normal behavior of @Html.Action?\r\nPS: I'm talking about MVC5\r\nThanks."
