id: dsq-747524667
date: 2008-03-24T02:54:30.0000000-07:00
name: tgmdbm
avatar: https://disqus.com/api/users/avatars/tgmdbm.jpg
message: <p>@Jeremy, I do agree with you.<br>The only reason I return to record mode is when testing redirects in MVC. I first set up expectation on Redirect and capture the URL. after the target invocation I fake out the request url and querystring and call RouteTable.Routes.GetRouteData passing in the current mock context. I then assert against the returned routedata.<br>As you suggest, I'm only making one logical assertion. but i've still had to return to record mode.<br>It's been said before that testing redirects is a lot more difficult than it should be. Perhaps it might be possible to do this using a strict Expect&gt;Invoke&gt;Assert method in a future release of MVC. But for now this is the cleanest solution I've found.<br>The problem here is, to get the route data from a url, you need to pass in a HttpContextBase.<br>This ties in with this discussion, <a href="http://forums.asp.net/t/1229801.aspx" rel="nofollow noopener" title="http://forums.asp.net/t/1229801.aspx">http://forums.asp.net/t/122...</a><br>Maybe there could be an overload of GetRouteData which simply took a string url!?</p>
