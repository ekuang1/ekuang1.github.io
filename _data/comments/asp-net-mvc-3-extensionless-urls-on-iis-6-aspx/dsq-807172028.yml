id: dsq-807172028
date: 2013-02-21T08:10:38.0000000-08:00
name: MN
avatar: https://disqus.com/api/users/avatars/mnemanov.jpg
message: <p>IIS6, Server 2003</p><p>Problem with isapifilter and redirect websites:<br>I have a website configured with a host header of <a href="http://domain.com" rel="nofollow noopener" title="domain.com">domain.com</a> to redirect to <a href="http://www.domain.com" rel="nofollow noopener" title="www.domain.com">www.domain.com</a>, the target domain is NOT <a href="http://asp.net" rel="nofollow noopener" title="asp.net">asp.net</a>.</p><p>the isapi filter adds /eurl.axd/guid to the request and the redirect includes the /eurl... and since the target site is not <a href="http://asp.net" rel="nofollow noopener" title="asp.net">asp.net</a> it returns a 404.</p><p>idealy the aspnet_isapi.dll should be updated to detect a 'redirect only' website and not add the eurl.axd.</p><p>my solution has been to remove the aspnet_isapi filter from the root website and add it manually to the only 2 MVC websites on my server.</p><p>this solution has been working just fine for at least a year thru many security updates and server reboots.</p><p>recently something has changed in the security updates process. it seems after an update the filter is removed from the individual sites and added to the root website, breaking my redirect websites.</p><p>I put together a script to remove the filter from the root and add it back to the sites that need it.</p>
