id: dsq-1489669285
date: 2014-07-17T05:02:49.0000000-07:00
name: Guest
avatar: https://disqus.com/api/users/avatars/Guest.jpg
message: <p>You sample will not work for nested collection, for item like "Items[1].Items[1].Index", expected result is "Items[1].Items.Index", but code returns "Items.Items.Index".</p><p>I made a quick fix:</p><p>static Regex _stripIndexerRegex = new Regex(@"\[(?&lt;index&gt;\d+)\]", RegexOptions.Compiled | RegexOptions.RightToLeft);</p><p> public static string GetIndexerFieldName(this TemplateInfo templateInfo)</p><p>        {</p><p>            string fieldName = templateInfo.GetFullHtmlFieldName("Index");</p><p>            var matches = _stripIndexerRegex.Matches(fieldName);</p><p>            if (matches.Count &gt; 0)</p><p>            {</p><p>                var match = matches[0];</p><p>                fieldName = fieldName.Remove(match.Index, match.Length);</p><p>            }</p><p>          //  fieldName = _stripIndexerRegex.Replace(fieldName, string.Empty);</p><p>            if (fieldName.StartsWith("."))</p><p>            {</p><p>                fieldName = fieldName.Substring(1);</p><p>            }</p><p>            return fieldName;</p><p>        }</p>
