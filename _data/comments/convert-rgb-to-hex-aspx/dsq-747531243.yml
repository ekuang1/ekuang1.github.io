id: dsq-747531243
date: 2011-01-13T05:10:37.0000000-08:00
name: zegarek84
avatar: https://disqus.com/api/users/avatars/zegarek84.jpg
message: <p>"rgb(11,22,33)", "rgb(10%, 30%, 30%)", "#aaa", "#aaaaaa", rgba(12, 34, 56, 1)" <br><code><br>/*<br> * @param {string} sColor<br> * @return {integer|false}<br> */<br>function colorToInt(sColor){<br>  var sFirst = sColor[0], i, aFromReg, iR, iG, iB;<br>  if(!sFirst)<br>    return false;<br>  if(sFirst==='#') {<br>    if(!!sColor[6]) {<br>      sColor = sColor.substr(1, 6);<br>    } else {<br>      sColor = [sColor[1],sColor[1],sColor[2],sColor[2],sColor[3],sColor[3]].join('');<br>    }<br>    i = parseInt(sColor, 16);<br>  } else {<br>    /*<br>     * few other color representations, like "rgb(10%, 30%, 30%)", "rgba(12, 34, 56, 20)"<br>     */<br>    aFromReg = /rgba?\s*\(\s*(\d+)(\D)\D*(\d+)\D*(\d+)/i.exec(sColor);<br>    if(!aFromReg) return false;<br>    iR = parseInt(aFromReg[1], 10);<br>    iG = parseInt(aFromReg[3], 10);<br>    iB = parseInt(aFromReg[4], 10);<br>    if (aFromReg[2]==='%') {<br>      iR = Math.round(iR*2.55);<br>      iG = Math.round(iG*2.55);<br>      iB = Math.round(iB*2.55);<br>    }<br>    i = iR&lt;&lt;16|iG&lt;&lt;8|iB;<br>    // fix gdyby czasem liczby były większe niż 255 podał 16777215 = (1&lt;&lt;24) - 1;<br>    i&amp;=16777215;<br>    aFromReg = iR = iG = iB = null;<br>  }<br>  sFirst = sColor = null;<br>  return i;<br>}<br>/*<br> * @param {integer} integer<br> * @return {string}<br> */<br>function intToHexColor(integer) {<br>  // to gdyby ktoś za dużą wartość podał 16777215 = (1&lt;&lt;24) - 1;<br>  integer&amp;=16777215;<br>  //  gdy są z przodu zera to rzutowanie do stringa jest nie poprawne<br>  //  - lepiej o 1 znak więcej niech wygeneruje a potem przyciąć ;)<br>  integer|=1&lt;&lt;24;<br>  return ['#',integer.toString(16).substr(1, 6)].join('');<br>}<br>/*<br> * @param {integer} integer<br> * @return {string}<br> */<br>function intToRGBColor(integer) {<br>  return ['RGB(',integer&gt;&gt;16 &amp; 255,', ',integer&gt;&gt;8 &amp; 255,', ',integer &amp; 255,')'].join('');<br>}<br>/*<br> * @param {integer} integer<br> * @return {string}<br> */<br>function intToRGBaColor(integer) {<br>  return ['RGB(',integer&gt;&gt;16 &amp; 255,', ',integer&gt;&gt;8 &amp; 255,', ',integer &amp; 255,', 1)'].join('');<br>}<br></code></p>
