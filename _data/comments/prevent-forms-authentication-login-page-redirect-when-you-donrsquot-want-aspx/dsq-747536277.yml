id: dsq-747536277
date: 2012-01-28T12:48:50.0000000-08:00
name: Chin Bae
avatar: https://disqus.com/api/users/avatars/Chin Bae.jpg
message: <p>I found that that PostReleaseRequestState event isn't firing in my WCF Web Api application either. I was thinking, why bother doing all this opt-in nonsense with the HttpContext.Items dictionary?<br>Can't you just check if the Response.StatusCode == 302 and Request.Headers["X-Requested-With"] is anything other than null and then change the StatusCode accordingly?<br>Are there any scenarios in which you'd want a 302 to go through other than when Request.Headers["X-Requested-With"] is null (i.e. through a regular browser request)?<br>The only question would be how reliable is Request.Headers["X-Requested-With"] as a means of determining the source of the request?<br>Are there any scenarios in which a regular browser request wouldn't have Request.Headers["X-Requested-With"] == null?<br>Are there any scenarios in which a non-browser requests would also cause Request.Headers["X-Requested-With"] == null?<br>For example, what's the Request.Headers["X-Requested-With"] value when making a request with the WebClient class or the HttpWebRequest class?</p>
