id: dsq-747508298
date: 2010-01-13T21:23:26.0000000-08:00
name: Sridhar
avatar: https://disqus.com/api/users/avatars/Sridhar.jpg
message: <p>I am having an annoying problem, I am making a https request to <a href="https://www2.swift.com/bicdownload/bicdownloader?action=getfile&amp;productline=bicdir&amp;product=bicdb&amp;content=delta&amp;format=txt" rel="nofollow noopener" title="https://www2.swift.com/bicdownload/bicdownloader?action=getfile&amp;productline=bicdir&amp;product=bicdb&amp;content=delta&amp;format=txt">www2.swift.com/.../bicdownloader</a> it returns a 401 unauthorized error. I have tried setting setting the authorization header and also set PreAuthenticate to true. I have set most of the settings specified in this site and still not able to solve this problem. The service uses a basic authentication.<br>Uri uri = new Uri("<a href='https://www2.swift.com/bicdownload/bicdownloader?action=getfile&amp;productline=bicdir&amp;product=bicdb&amp;content=delta&amp;format=txt"' rel="nofollow noopener" title='https://www2.swift.com/bicdownload/bicdownloader?action=getfile&amp;productline=bicdir&amp;product=bicdb&amp;content=delta&amp;format=txt"'>www2.swift.com/.../bicdownloader</a>);<br>HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create(uri);<br>try<br>{<br>System.Net.ServicePointManager.CertificatePolicy = new  TrustAllCertificatePolicy(); <br>CredentialCache cache = new CredentialCache();<br>cache.Add(uri, "Basic", new NetworkCredential("me@example.com", "Password1$","<a href="http://www2.swift.com" rel="nofollow noopener" title="www2.swift.com">www2.swift.com</a>"));<br>myReq.Credentials = cache;<br>myReq.UnsafeAuthenticatedConnectionSharing = true;<br>myReq.PreAuthenticate = true;<br>myReq.ServicePoint.Expect100Continue = false;<br>myReq.MaximumAutomaticRedirections = 10;<br>myReq.Method = "Post";<br>myReq.ContentType = "application/x-www-form-urlencoded";<br>myReq.KeepAlive = true;<br>myReq.Pipelined = true;<br>string usernamePassword = "me@example.com" + ":" + "Password1$";<br>byte[] authBytes = Encoding.UTF8.GetBytes(usernamePassword.ToCharArray()); <br>myReq.Headers["Authorization"]  = "Basic " + Convert.ToBase64String(authBytes);<br><br>HttpWebResponse wr = (HttpWebResponse)myReq.GetResponse();<br>}<br>Please help I have already wasted 2 days on this.<br>Kind Regards,<br>Sridhar</p>
