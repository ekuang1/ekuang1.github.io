id: dsq-747535134
date: 2011-04-27T00:21:12.0000000-07:00
name: Brian
avatar: https://disqus.com/api/users/avatars/xt0rted.jpg
message: <p>I'm doing something like this in my CI process. I have a local NuGet server that hosts all external packages we use along with all internal packages. The only thing I check into source control is packages\repositories.config then I have a custom build task which executes before anything else in my build script. The setup is something like this<br><code><br>&lt;SetupNuGet RepositoryPath="$(NuGetPackages)\repositories.config"&gt;<br>&lt;Output TaskParameter="Packages" ItemName="Packages" /&gt;<br>&lt;/SetupNuGet&gt;<br>&lt;Exec Command="$(NuGet) i %(Packages.Identity) –Source $(NuGetSource) –o $(NuGetPackages)" /&gt;<br></code><br>The SetupNuGet task contains a real simple piece of code which is<br><code><br>var xml = XElement.Load(RepositoryPath);<br>Packages = xml.Elements("repository").Select(n =&gt; n.Attributes("path").Value).ToArray();<br></code><br>I've also been playing with the source so you can point NuGet.exe at the repositories.config file just like you can a packages.config and it will pull down all the packages that are needed.</p>
