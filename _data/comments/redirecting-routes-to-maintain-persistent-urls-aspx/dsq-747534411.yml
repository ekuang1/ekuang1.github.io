id: dsq-747534411
date: 2011-04-27T02:05:24.0000000-07:00
name: Rex
avatar: https://disqus.com/api/users/avatars/Rex.jpg
message: <p><br>I'm sure I'm misunderstanding something fundamental here, but I'm moving an MVC3 app from IIS6 to IIS7 and want to redirect all .mvc routes to their extension-free counterparts.<br>I downloaded the RouteMagic source and in the web demo project placed only the new route and a redirect from the old route in RegisterRoutes:<br><code><br>var defaultRoute = routes.MapRoute(<br>    "Default",<br>"{controller}/{action}", <br>new { controller = "Home", action = "Index" }<br>).SetRouteName("Default");<br>routes.Redirect(r =&gt; r.Map("OldDefault", <br>"{controller}.mvc/{action}", <br>new { controller = "Home", action = "Index" }))<br>.To(defaultRoute);<br></code><br>When I fire up the example with RouteDebugger attached the url /home/index works as expected, but for /home.mvc/index  RouteDebugger shows it matching the "{controller}/{action}" route, not "{controller}.mvc/{action}" and the value for the controller token is "home.mvc" instead of just "home", which doesn't map to an existing controller (there's a HomeController.cs, not Home.MvcController.cs).<br>I'm thinking I'm trying to do something that's not possible here but I can't put my finger on it. Sorry for the long post...<br></p>
