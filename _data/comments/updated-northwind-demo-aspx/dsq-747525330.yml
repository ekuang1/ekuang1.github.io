id: dsq-747525330
date: 2009-01-15T13:11:41.0000000-08:00
name: Chuck Wagner
avatar: https://disqus.com/api/users/avatars/Chuck Wagner.jpg
message: "<p>Here is the updated EditProduct POST action if anyone is still having problems getting Phil's demo working.<br>I integrated Kevin Daly's suggestion of redirecting after the POST to the product list for the current product's category.<br><br><code><br>[AcceptVerbs(\"POST\")]<br>        public ActionResult EditProduct(int id, [Bind(Include=\"ProductName,UnitPrice\")]Product product) {<br>            NORTHWNDEntities entities = new NORTHWNDEntities();<br>            if (ModelState.IsValid) {<br>                <br>                var dbProduct = entities.ProductSet<br>                                .Include( \"Categories\" )<br>                                .First(<br>                                    p =&gt; p.ProductID == id<br>                                );<br>                <br>                dbProduct.ProductName = product.ProductName;<br>                dbProduct.UnitPrice = product.UnitPrice;<br>                entities.SaveChanges();<br>                if (Request.IsMvcAjaxRequest()) {<br>                    return Content(\"Product Updated\");<br>                }<br>                else {<br>                    <br>                    return RedirectToAction(<br>                                            \"Products\", <br>                                            new { id = dbProduct.Categories.CategoryID }<br>                    );<br>                }<br>            }<br>            entities.Dispose();<br>            entities = null;<br>            return View(product);<br>        }<br></code><br><br>Note: The redirect to the product list is obviously negated if you are using the EditProductAjax ContentResult view.</p>"
