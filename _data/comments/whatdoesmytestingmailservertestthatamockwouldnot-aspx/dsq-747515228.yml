id: dsq-747515228
date: 2006-05-31T13:49:00.0000000-07:00
name: Greg Young
avatar: https://disqus.com/api/users/avatars/Greg Young.jpg
message: <p>As I had said, it seems like it could have some great uses in integration testing.<br>In the specific case you mention though I find it is in fact TDD showing you a design problem. X-Mailer is not part of the SMTP protocol, it is part of MIME <a href="http://www.bath.ac.uk/bucs/email/anatomy.shtml" rel="nofollow noopener" title="http://www.bath.ac.uk/bucs/email/anatomy.shtml">http://www.bath.ac.uk/bucs/...</a> .. the MIME message is sent directly over SMTP. With a good abstraction you should easily be able to get the MIME data for your email object. This is what I was referring to when I discussed passing an object to the routine as opposed to the fields. A properly encapsulated MIME object would in fact make this a non-issue. <br>Getting back to System.Net.Mail, if you were to pass a MailMessage object (or your own object) as opposed to the indivual parameters  you could in fact have your mock simply check that the header was set in the headers collection of the object you were given. It should not be the job of this code to test that the SMTP subsystem can properly take a MailMessage object and convert it to MIME data. This is obviously well outside the scope of a single test.<br><br>Cheers,<br>Greg<br></p>
