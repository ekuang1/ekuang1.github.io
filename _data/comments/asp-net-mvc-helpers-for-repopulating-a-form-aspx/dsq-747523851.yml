id: dsq-747523851
date: 2007-12-21T08:22:25.0000000-08:00
name: Sergio Pereira
avatar: https://disqus.com/api/users/avatars/Sergio Pereira.jpg
message: '<p>For the sake of completeness, I tried it out and t worked with minor tweaks:<br>[ControllerAction]<br>public void New()<br>{<br>  Article article = TempData.Get&lt;Article&gt;("article") ?? <br>       new Article { Title = "", Body = "" };<br>  RenderView("New", article);<br>  //The New page inherits from ViewPage&lt;Article&gt;<br>}<br>// Get&lt;T&gt; is an extension I created<br>[ControllerAction]<br>public void Create()<br>{<br>  Article article = new Article();<br>  article.UpdateFrom(Request.Form);<br>  //Pretend this was extensive validation<br>  if (article.IsValid)<br>  {<br>    repository.Persist(article);<br>    RedirectToAction("List");<br>  }<br>  else<br>  {<br>    TempData["Message"] = "Please supply all fields.";<br>    TempData["article"] = article;<br>    //Takes us to a form for creating a product.<br>    RedirectToAction("New");<br>  }<br>}<br>The "New" view (inherits from ViewPage&lt;Article&gt;:<br>&lt;% using(Html.Form("Create", "Articles")) { %&gt;   <br>&lt;span class="error"&gt;<br>    &lt;%= ViewContext.TempData.SafeGet("Message") %&gt;<br>&lt;/span&gt;<br>&lt;label for="title"&gt;Title: &lt;/label&gt; <br>&lt;%= Html.TextBox("title"<br>  , Html.Encode(ViewData.Title)) %&gt;<br>&lt;label for="body"&gt;Body: &lt;/label&gt;<br>&lt;%= Html.TextArea("body"<br>  , Html.Encode(ViewData.Body)) %&gt;<br>&lt;%= Html.SubmitButton() %&gt;<br>&lt;% } %&gt;<br></p>'
