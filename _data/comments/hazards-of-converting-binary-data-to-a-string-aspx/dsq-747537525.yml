id: dsq-747537525
date: 2012-01-30T06:58:38.0000000-08:00
name: Jon Skeet
avatar: https://disqus.com/api/users/avatars/Jon Skeet.jpg
message: "<p>As ever, there's more to say than I find time to actually write down :)<br>Your final caveats are very relevant. To state them in a different way, your round-tripping code assumes that the *string itself* will be round-tripped. This assumes that you're not using any protocol which might strip non-printable characters, or perform some different decomposition of non-ASCII characters etc. For example, XML only allows you to use a very few characters below U+0020... and your example of a \"truncate on Unicode NUL\" API is a good one too.<br>Base64 is pleasant in that it only uses printable ASCII characters. It's a shame that the normal form of it doesn't use URL-safe ASCII characters, which is why there are web-targeted variations - but at least most other protocols are likely to round-trip the data (or mutate it in harmless ways, such as adding removable whitespace).<br>Another option to mention is hex-encoding the data: this has the disadvantage of taking up more space than base64 (chars = 2x bytes, instead of chars = 4/3x bytes for base64) but it has advantages too: it's easier to decode by inspection, and it's URL-safe by default.</p>"
