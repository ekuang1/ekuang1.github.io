id: dsq-747520123
date: 2007-09-13T09:51:21.0000000-07:00
name: jphilip
avatar: https://disqus.com/api/users/avatars/jphilip.jpg
message: <p>This way of adding tags is really not practical for regular people (Non geeks)<br>At least, to be able to link back to the blog's own tag page, the ParseTags method only needs to discard the  /Default.aspx part of the URL if it is present as in the code bellow.<br>But really the poster should have the option to just type the tags in a text box and have subtext do the rest.<br><code>public static List&lt;string&gt; ParseTags(string html)<br>        {<br>Regex relRegex = new Regex(@"\s+rel\s*=\s*(""[^""]*?\btag\b.*?""|'[^']*?\btag\b.*?')", RegexOptions.IgnoreCase | RegexOptions.Singleline);<br>Regex hrefRegex = new Regex(@"\s+href\s*=\s*(""(?&lt;url&gt;[^""]*?)""|'(?&lt;url&gt;[^']*?)')", RegexOptions.IgnoreCase | RegexOptions.Singleline);<br>Regex anchorRegex = new Regex(@"&lt;a(\s+\w+\s*=\s*(?:""[^""]*?""|'[^']*?')(?!\w))+\s*&gt;.*?", RegexOptions.IgnoreCase | RegexOptions.Singleline);<br>List&lt;string&gt; tags = new List&lt;string&gt;();<br>foreach (Match m in anchorRegex.Matches(html))<br>            {<br>            string anchorHtml = m.Value;<br>if (!relRegex.IsMatch(anchorHtml))<br>continue;<br>                Match urlMatch = hrefRegex.Match(anchorHtml);<br>                if (urlMatch.Success)<br>                {<br>                    string urlStr = urlMatch.Groups["url"].Value;<br>                    if (urlStr.ToLower().EndsWith("/default.aspx"))<br>                        urlStr = urlStr.Substring(0, urlStr.Length - 13);<br>                    Uri url;<br>                    if (Uri.TryCreate(urlStr, UriKind.RelativeOrAbsolute, out url))<br>                    {<br>                        string[] seg = url.Segments;<br>                        string tag = HttpUtility.UrlDecode(seg[seg.Length - 1].Replace("/", ""));<br>                        if(!tags.Contains(tag))<br>tags.Add(tag);<br>                    }<br>                }<br>            }<br>            return tags;<br>        }</code></p>
